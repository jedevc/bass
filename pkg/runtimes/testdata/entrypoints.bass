{:from-image
 (-> (from (linux/alpine/git :2.36.3)
       ($ --version))
     (read :raw)
     next)
 :unset-image
 (-> (from (linux/alpine/git :2.36.3)
       (with-entrypoint ($) [])
       ($ git --version))
     (read :raw)
     next)
 :from-thunk
 (-> (from (linux/alpine)
       ; set an entrypoint
       (-> ($ sh -c "echo setting entrypoint >> out")
           (with-entrypoint ["sh"]))

       ; use entrypoint
       ($ -c "echo using entrypoint >> out")
       ($ -c "echo using entrypoint again >> out")

       ; erase entrypoint
       (-> ($ -c "echo removing entrypoint >> out")
           (with-entrypoint []))

       ; use no entryopint
       ($ sh -c "echo no more entrypoint >> out"))
     (subpath ./out)
     (read :raw)
     next)
 :from-thunk-scratch
 (-> (from (linux/alpine)
       ; set an entrypoint
       (with-entrypoint ($) ["sh"])

       ; use entrypoint
       ($ -c "echo using entrypoint >> out")
       ($ -c "echo using entrypoint again >> out")

       ; erase entrypoint
       (with-entrypoint ($) [])

       ; use no entryopint
       ($ sh -c "echo no more entrypoint >> out"))
     (subpath ./out)
     (read :raw)
     next)
 }
